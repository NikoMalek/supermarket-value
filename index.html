<!DOCTYPE html>
<html>
<head>
    <title>Productos disponibles</title>
</head>
<body>
    <h1>Productos disponibles</h1>
    <form id="url-form">
        <label for="url">URL del producto:</label>
        <input type="text" id="url" name="url" value="https://www.jumbo.cl/lacteos-y-quesos/leches">
        <button type="submit">Enviar</button>
    </form>
    <ul id="productos-lista">
        <!-- Los productos se agregarán aquí -->
    </ul>

    <script>
        document.getElementById('url-form').addEventListener('submit', function(event) {
            event.preventDefault();
            // para mostrar el texto "cargando..."
            const lista = document.getElementById('productos-lista');
            lista.innerHTML = 'Obteniendo productos...';

            const url = document.getElementById('url').value;
            fetch('http://127.0.0.1:5000/producto', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ url: url })
            })
            .then(response => response.json())
            .then(data => {
                const lista = document.getElementById('productos-lista');
                lista.innerHTML = ''; // Limpiar la lista actual
                data.forEach(producto => {
                    const item = document.createElement('li');
                    item.textContent = producto;
                    lista.appendChild(item);
                });
            })
            .catch(error => console.error('Error al obtener los productos:', error));
        });
    </script>
</body>
</html>